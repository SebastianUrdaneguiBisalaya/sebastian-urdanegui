---
import "../styles/global.css";
import { ClientRouter } from "astro:transitions";
import Footer from "@components/footer.astro";
const lang = Astro.currentLocale;
const currentPath = Astro.url.pathname.replace(`/${lang}`, "");
const newpathES = `/es${currentPath}`;
const newpathEN = `${currentPath}`;
import Navbar from "@components/navbar.tsx";
---

<html lang={lang} class="dark">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Sebastian Marat Urdanegui Bisalaya | Full-Stack Developer</title>
    <meta
      name="description"
      content="Sebastian Urdanegui is a Full-Stack Web/Mobile Developer & Data Analyst from Lima, Peru, building impactful web and mobile apps with React, Node.js & Python."
    />
    <meta
      name="keywords"
      content="JavaScript, React, React Native, Node.js, TypeScript, desarrollo web, desarrollo móvil, fullstack developer, frontend developer, backend developer, python, data analyst, data scientist, data visualization, programación, sebastian marat urdanegui bisalaya"
    />
    <meta
      property="og:image"
      content="https://res.cloudinary.com/drzumfcdp/image/upload/v1758157121/Landing%20Page%20Sebastian/profile-pic_jtkv6j.jpg"
    />
    <meta
      property="twitter:image"
      content="https://res.cloudinary.com/drzumfcdp/image/upload/v1758157121/Landing%20Page%20Sebastian/profile-pic_jtkv6j.jpg"
    />
    <meta property="og:title" content="Sebastian Marat Urdanegui Bisalaya" />
    <meta
      property="twitter:title"
      content="Sebastian Marat Urdanegui Bisalaya"
    />
    <meta
      property="og:description"
      content="Sebastian Urdanegui is a Full-Stack Web/Mobile Developer & Data Analyst from Lima, Peru, building impactful web and mobile apps with React, Node.js & Python."
    />
    <meta
      property="twitter:description"
      content="Sebastian Urdanegui is a Full-Stack Web/Mobile Developer & Data Analyst from Lima, Peru, building impactful web and mobile apps with React, Node.js & Python."
    />
    <meta property="og:url" content="https://sebastianurdanegui.com" />
    <meta property="twitter:url" content="https://sebastianurdanegui.com" />
    <meta name="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="author" content="Sebastian Marat Urdanegui Bisalaya" />
    <meta name="geo.region" content="PE" />
    <meta name="geo.placename" content="Perú" />
    <meta name="rating" content="general" />
    <meta name="distribution" content="global" />
    <meta name="target" content="all" />
    <script is:inline>
      (function () {
        try {
          const theme = localStorage.getItem("theme");
          const prefersDark = window.matchMedia(
            "(prefers-color-scheme: dark)"
          ).matches;
          if (theme === "dark" || (!theme && prefersDark)) {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        } catch (_) {}
      })();
    </script>
    <ClientRouter />
  </head>
  <body class="bg-white dark:bg-dark">
    <div class="max-w-3xl w-full mx-auto p-4 md:p-6 flex flex-col gap-4">
      <header class="w-full flex flex-col items-center justify-center">
        <div
          class="flex flex-col gap-2 border-b-[0.5px] border-gray-500 w-full py-4"
        >
          <div
            class="flex items-center justify-center self-end gap-6 text-white"
          >
            <div class="flex flex-row items-center gap-2">
              <a
                href={newpathEN}
                class:list={[
                  "font-sora",
                  "text-dark/60",
                  "dark:text-gray-400",
                  "hover:text-dark",
                  "dark:hover:text-white",
                  "hover:underline",
                  "text-xs sm:text-sm",
                  "cursor-pointer",
                  { underline: lang === "en" },
                ]}>EN</a
              >
              <span
                class="font-sora text-dark/60 dark:text-gray-400 text-xs sm:text-sm"
                >/</span
              >
              <a
                href={newpathES}
                class:list={[
                  "font-sora",
                  "text-dark/60",
                  "dark:text-gray-400",
                  "hover:text-dark",
                  "dark:hover:text-white",
                  "hover:underline",
                  "text-xs sm:text-sm",
                  "cursor-pointer",
                  { underline: lang === "es" },
                ]}>ES</a
              >
            </div>
            <button
              id="dark-mode-toggle"
              class="p-2 hover:bg-dark/5 dark:hover:bg-white/10 text-dark/60 dark:text-gray-300 rounded-full cursor-pointer"
              type="button"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                stroke-width="0"
                viewBox="0 0 56 56"
                ><path
                  d="M30 4.6c0-1-.9-2-2-2a2 2 0 00-2 2v5c0 1 .9 2 2 2s2-1 2-2zm9.6 9a2 2 0 000 2.8c.8.8 2 .8 2.9 0L46 13a2 2 0 000-2.9 2 2 0 00-3 0zm-26 2.8c.7.8 2 .8 2.8 0 .8-.7.8-2 0-2.9L13 10c-.7-.7-2-.8-2.9 0-.7.8-.7 2.1 0 3zM28 16a12 12 0 00-12 12 12 12 0 0012 12 12 12 0 0012-12 12 12 0 00-12-12zm0 3.6c4.6 0 8.4 3.8 8.4 8.4 0 4.6-3.8 8.4-8.4 8.4a8.5 8.5 0 01-8.4-8.4c0-4.6 3.8-8.4 8.4-8.4zM51.3 30c1.1 0 2-.9 2-2s-.9-2-2-2h-4.9a2 2 0 00-2 2c0 1.1 1 2 2 2zM4.7 26a2 2 0 00-2 2c0 1.1.9 2 2 2h4.9c1 0 2-.9 2-2s-1-2-2-2zm37.8 13.6a2 2 0 00-3 0 2 2 0 000 2.9l3.6 3.5a2 2 0 002.9 0c.8-.8.8-2.1 0-3zM10 43.1a2 2 0 000 2.9c.8.7 2.1.8 3 0l3.4-3.5c.8-.8.8-2.1 0-2.9-.8-.8-2-.8-2.9 0zm20 3.4c0-1.1-.9-2-2-2a2 2 0 00-2 2v4.9c0 1 .9 2 2 2s2-1 2-2z"
                  stroke="none"
                  fill="currentColor"></path></svg
              >
            </button>
          </div>
          <h1
            class="text-black dark:text-white font-sora text-lg font-medium text-center w-full"
          >
            Sebastian Marat Urdanegui Bisalaya
          </h1>
          <p
            class="text-black/60 dark:text-gray-300 text-center w-full font-reddit"
          >
            Full-Stack Developer
          </p>
          <div
            class="flex flex-row items-center justify-center gap-1 w-full pt-4"
          >
            <a
              href="https://www.linkedin.com/in/sebastianurdaneguibisalaya/"
              target="_blank"
              class="opacity-50 flex flex-col items-center justify-center h-6 w-auto cursor-pointer hover:opacity-100 text-dark/90 dark:text-gray-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="45"
                height="45"
                viewBox="0 0 20 20"
                ><path
                  fill="currentColor"
                  d="M17.04 17.043h-2.962v-4.64c0-1.107-.023-2.531-1.544-2.531c-1.544 0-1.78 1.204-1.78 2.449v4.722H7.793V7.5h2.844v1.3h.039c.397-.75 1.364-1.54 2.808-1.54c3.001 0 3.556 1.974 3.556 4.545zM4.447 6.194c-.954 0-1.72-.771-1.72-1.72s.767-1.72 1.72-1.72a1.72 1.72 0 0 1 0 3.44m1.484 10.85h-2.97V7.5h2.97zM18.522 0H1.476C.66 0 0 .645 0 1.44v17.12C0 19.355.66 20 1.476 20h17.042c.815 0 1.482-.644 1.482-1.44V1.44C20 .646 19.333 0 18.518 0z"
                ></path></svg
              >
            </a>
            <a
              href="https://github.com/SebastianUrdaneguiBisalaya"
              target="_blank"
              class="opacity-50 flex flex-col items-center justify-center h-8 w-auto cursor-pointer hover:opacity-100 text-dark/90 dark:text-gray-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="45"
                height="45"
                viewBox="0 0 24 24"
                ><path
                  fill="currentColor"
                  d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"
                ></path></svg
              >
            </a>
            <a
              href="https://x.com/sebasurdaneguib"
              target="_blank"
              class="opacity-50 flex flex-col items-center justify-center h-6 w-auto cursor-pointer hover:opacity-100 text-dark/90 dark:text-gray-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="45"
                height="45"
                viewBox="0 0 14 14"
                ><g fill="none"
                  ><g clip-path="url(#IconifyId198beeb14fada8c171)"
                    ><path
                      fill="currentColor"
                      d="M11.025.656h2.147L8.482 6.03L14 13.344H9.68L6.294 8.909l-3.87 4.435H.275l5.016-5.75L0 .657h4.43L7.486 4.71zm-.755 11.4h1.19L3.78 1.877H2.504z"
                    ></path></g
                  ><defs
                    ><clipPath id="IconifyId198beeb14fada8c171"
                      ><path fill="currentColor" d="M0 0h14v14H0z"
                      ></path></clipPath
                    ></defs
                  ></g
                ></svg
              >
            </a>
            <a
              href="https://public.tableau.com/app/profile/sebastian.marat.urdanegui.bisalaya/vizzes"
              target="_blank"
              class="opacity-50 flex flex-col items-center justify-center h-6 w-auto cursor-pointer hover:opacity-100 text-dark/90 dark:text-gray-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="45"
                height="45"
                viewBox="0 0 24 24"
                ><path
                  fill="currentColor"
                  d="M11.654.174v2.203H9.682v.58h1.972V5.16h.696V2.957h1.97v-.58h-1.97V.174h-.348zm6.03 2.262l-.002 1.623v1.623h-2.957v.927h2.957v3.188h1.043l.011-1.582l.02-1.576l1.465-.02l1.46-.01v-.927h-2.953V2.436h-.522zm-12.407.06v3.19H2.291v.925h2.986v3.19h.985V6.61h3.013v-.925H6.262V2.496H5.77zm6.086 5.27v3.593H8.06v1.188h3.304v3.596h1.28v-3.596h3.309v-1.188h-3.31V7.766h-.637zm9.721 1.55v2.221h-2.012v.811h2.012v2.261h.887v-2.261H24v-.811h-2.029v-2.22h-.422zm-19.111.131v2.174H0v.621h1.973v2.194h.667v-2.194h2v-.62H2.609V9.446h-.318zm15.709 4.516v3.254h-3.016v.927h3.016v3.217h1.072v-3.216h2.986v-.928h-2.986v-3.254h-.533zm-12.463.008v3.246H2.262v.928h2.957v3.189H6.32v-3.189h2.955v-.928H6.32V13.97h-.55zm6.316 4.578l.002 1.103v1.1H9.566v.812h1.971v2.262h.928l.012-1.119l.017-1.143h1.969v-.812h-2v-2.203h-.465z"
                ></path></svg
              >
            </a>
            <a
              href="https://medium.com/@sebasurdanegui"
              target="_blank"
              class="opacity-50 flex flex-col items-center justify-center h-6 w-auto cursor-pointer hover:opacity-100 text-dark/90 dark:text-gray-300"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="45"
                height="45"
                viewBox="0 0 8 8"
                ><path
                  fill="currentColor"
                  d="M2 6C-.5 6-.5 2 2 2s2.5 4 0 4m3.5 0C4 6 4 2 5.5 2s1.5 4 0 4m2 0C7 6 7 2 7.5 2s.5 4 0 4"
                ></path></svg
              >
            </a>
          </div>
        </div>
        <Navbar lang={lang ?? ""} client:load />
      </header>
      <slot />
      <Footer lang={lang ?? ""} />
    </div>
  </body>
</html>

<style>
  * {
    margin: 0;
    box-sizing: border-box;
  }
  html,
  body {
    width: 100%;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
</style>

<script>
  import mermaid from "mermaid";

  async function renderMermaid() {
    const isDark = document.documentElement.classList.contains("dark");

    mermaid.initialize({
      startOnLoad: false,
      theme: isDark ? "dark" : "default",
      securityLevel: "loose",
    });

    const codeBlocks = document.querySelectorAll(
      "pre[data-language='mermaid'] code"
    );

    codeBlocks.forEach(async (block, index) => {
      const parent = block.parentElement;
      const code = block.textContent.trim();

      const container = document.createElement("div");
      container.classList.add("mermaid-source");
      container.setAttribute("data-code", code);
      container.style.display = "flex";
      container.style.justifyContent = "center";
      container.style.alignItems = "center";

      const { svg } = await mermaid.render(`mermaid-${index}`, code);
      container.innerHTML = svg;

      parent?.replaceWith(container);
    });
  }

  async function rerenderMermaid() {
    const isDark = document.documentElement.classList.contains("dark");

    mermaid.initialize({
      startOnLoad: false,
      theme: isDark ? "dark" : "default",
      securityLevel: "loose",
    });

    const diagrams = document.querySelectorAll(".mermaid-source");

    diagrams.forEach(async (diagram, index) => {
      const code = diagram.getAttribute("data-code") as string;
      const { svg } = await mermaid.render(`mermaid-${index}`, code);
      diagram.innerHTML = svg;
    });
  }

  document.addEventListener("astro:page-load", () => {
    const darkModeToggleButton = document.getElementById("dark-mode-toggle");
    const theme = localStorage.getItem("theme");
    const prefersDark = window.matchMedia(
      "(prefers-color-scheme: dark)"
    ).matches;
    if (theme === "dark" || (!theme && prefersDark)) {
      document.documentElement.classList.add("dark");
    } else {
      document.documentElement.classList.remove("dark");
    }

    renderMermaid();
    darkModeToggleButton?.addEventListener("click", () => {
      const isDark = document.documentElement.classList.contains("dark");
      if (isDark) {
        document.documentElement.classList.remove("dark");
        localStorage.setItem("theme", "light");
      } else {
        document.documentElement.classList.add("dark");
        localStorage.setItem("theme", "dark");
      }
      rerenderMermaid();
    });
  });
</script>
